# Git Branch 충돌 (Conflict) 정리

## 충돌이란?

**같은 파일의 같은 부분을 서로 다르게 수정했을 때** Git이 자동으로 합칠 수 없는 상황

## 언제 발생하나?

### 충돌 발생 상황

```
main 브랜치: 파일 A의 10번째 줄 → "안녕하세요"로 수정
feature 브랜치: 파일 A의 10번째 줄 → "Hello"로 수정

→ merge 시도 시 충돌 발생!
```

### 충돌이 안 나는 경우

- 서로 다른 파일을 수정한 경우
- 같은 파일이지만 다른 부분을 수정한 경우
- 한쪽만 수정하고 다른 쪽은 안 건드린 경우

## 충돌 발생 시 Git의 표시

충돌이 발생하면 파일에 이렇게 표시됩니다:

```
<<<<<<< HEAD (현재 브랜치)
안녕하세요
=======
Hello
>>>>>>> feature/login (합치려는 브랜치)
```

### 표시 의미

- `<<<<<<< HEAD`: 현재 브랜치의 내용 시작
- `=======`: 구분선
- `>>>>>>> 브랜치명`: 합치려는 브랜치의 내용 끝

## 충돌 해결 방법

### 1. 충돌 확인

```bash
git status
# 충돌 난 파일들이 "both modified"로 표시됨
```

### 2. 충돌 파일 열어서 수정

세 가지 선택지:

1. **현재 브랜치 것 선택**: `<<<<<<< HEAD` 부분만 남기고 나머지 삭제
2. **합치려는 브랜치 것 선택**: `>>>>>>> feature` 부분만 남기고 나머지 삭제
3. **둘 다 합치거나 새로 작성**: 필요한 내용으로 직접 수정

예시 - 해결 후:

```
안녕하세요 (Hello)
```

또는

```
Hello
```

**중요**: `<<<<<<<`, `=======`, `>>>>>>>` 표시는 반드시 삭제!

### 3. 해결 완료 후

```bash
# 수정한 파일을 staging area에 추가
git add 충돌파일.txt

# 충돌 해결 완료 (merge commit 생성)
git commit
```

## 충돌 해결 과정 전체 흐름

```bash
# 1. merge 시도
git merge feature/login
# → CONFLICT 발생!

# 2. 충돌 파일 확인
git status

# 3. 충돌 파일 열어서 수동으로 수정
# (에디터에서 <<<, ===, >>> 부분 해결)

# 4. 해결된 파일 add
git add .

# 5. merge 완료
git commit
# 또는 메시지와 함께
git commit -m "Merge feature/login - 충돌 해결"
```

## 충돌 방지 팁

### 1. 자주 pull/merge 하기

```bash
# 작업 전 항상 최신 상태로
git pull origin main
```

### 2. 작은 단위로 자주 commit

- 큰 변경사항을 한 번에 → 충돌 위험 ↑
- 작은 변경사항을 자주 → 충돌 위험 ↓

### 3. 팀원과 소통

- 같은 파일 작업 시 미리 공유
- 코드 리뷰로 사전 조율

### 4. 브랜치를 오래 유지하지 않기

- feature 브랜치가 오래될수록 main과 차이가 커짐
- 기능 완성되면 빨리 merge

## VSCode 같은 에디터에서 충돌 해결

현대적인 에디터는 충돌 해결을 쉽게 도와줍니다:

```
<<<<<<< HEAD
안녕하세요
||||||| (Accept Current Change) (Accept Incoming Change) (Accept Both Changes)
=======
Hello
>>>>>>> feature/login
```

## 충돌 해결 중 취소하고 싶다면

```bash
# merge 자체를 취소
git merge --abort

# 원래 상태로 돌아감
```

## 핵심 포인트

- 충돌은 **에러가 아니라 Git이 판단을 개발자에게 맡기는 것**
- 직접 파일을 열어서 어떤 내용을 남길지 결정해야 함
- `<<<<<<<`, `=======`, `>>>>>>>` 표시는 반드시 삭제!
- 충돌 해결 후 반드시 `git add` + `git commit`
